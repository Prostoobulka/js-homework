<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Lesson 15</title>
      <link rel="stylesheet" href="css/reset.css" />
      <link rel="stylesheet" href="css/style.css" />
   </head>

   <body>
      <div class="wrapper">
         <div class="result">
            <div class="result__body">
               <h1 class="result__title">Задача №2</h1>
               <p>
                  Створити об’єкт «Тир». У масиві зберігаються 1, якщо у цьому квадраті є заєць і 0
                  в іншому випадку.
               </p>
               <script>
                  // let tear = {
                  //    battleFieldWithRabbit: [0, 1, 0, 1, 1, 0, 0],

                  //    // Метод пострілу
                  //    shotShotgun: function (user) {
                  //       return this.battleFieldWithRabbit[user - 1] === 1
                  //    },
                  //    // Метод виведення ігрового поля
                  //    game: function () {
                  //       // кількість зайців
                  //       let rabbitsQuantity = this.battleFieldWithRabbit.reduce(
                  //          (prevNum, cell) => (cell === 1 ? prevNum + 1 : prevNum),
                  //          0
                  //       )
                  //       let user
                  //       do {
                  //          user = parseInt(
                  //             prompt(
                  //                `Зробіть вистріл в межах 1 до ${this.battleFieldWithRabbit.length}`
                  //             )
                  //          )
                  //          // Перевірка якщо user попав то віднімаємо кроликів вірно - замість 1 ставимо 0
                  //          if (this.shotShotgun(user)) {
                  //             alert("Ви влучили!!!")
                  //             rabbitsQuantity--
                  //             this.battleFieldWithRabbit[user - 1] = 0
                  //          } else alert("Не влучили спробуйте ще раз")
                  //          // граємо поки не застрілено всіх
                  //       } while (rabbitsQuantity > 0)
                  //    },
                  // }
                  // tear.game()
                  // // Конструктори
                  // function ShotGame(numberCell, numberRabbit) {
                  //    // Властивості
                  //    this.battleField = new Array(numberCell).fill(0)
                  //    this.numberRabbit = numberRabbit

                  //    // Методи
                  //    this.fillRabbit = function () {
                  //       // Повторити numberRabbit разів
                  //       // Рандомно вибирати ячейку
                  //       // до тих пір ставимо зайців поки не буде 1
                  //       // Перевірити якщо вона пуста ставимо зайця(1)
                  //       // інакше шукаємо другу ячейку
                  //       // до поки кінець
                  //       for (let i = 0; i < this.numberRabbit; i++) {
                  //          let ranCell
                  //          do {
                  //             ranCell = 0 + Math.floor(Math.random() * this.battleField.length)
                  //          } while (this.battleField[ranCell] === 1)
                  //          this.battleField[ranCell] = 1
                  //       }
                  //    }
                  //    // Постріл
                  //    this.shot = function (user) {
                  //       return this.battleField[user - 1] === 1
                  //    }
                  //    // Гра користувача
                  //    this.play = function () {
                  //       const game = this.fillRabbit()
                  //       let user
                  //       do {
                  //          user = parseInt(
                  //             prompt(`Зробіть постріл від 1 до ${this.battleField.length}`)
                  //          )
                  //          if (this.shot(user)) {
                  //             alert("Ви влучили!!!")
                  //             this.battleField[user - 1] = 0
                  //             this.numberRabbit--
                  //          } else {
                  //             alert("Не влучили!!!")
                  //          }
                  //       } while (this.numberRabbit > 0 && isFinite(user))
                  //       alert("Ви виграли ігру. Вітаємо!!!")
                  //    }
                  // }
                  // const game = new ShotGame(5, 2)
                  // game.play()
                  // console.log(0 + Math.floor(Math.random() * 5))
                  // (Prototype)
                  function ShotGame(numberCell, numberRabbit) {
                     // Властивості
                     this.battleField = new Array(numberCell).fill(0)
                     this.numberRabbit = numberRabbit
                  }
                  // Методи
                  ShotGame.prototype.fillRabbit = function () {
                     // Повторити numberRabbit разів
                     // Рандомно вибирати ячейку
                     // до тих пір ставимо зайців поки не буде 1
                     // Перевірити якщо вона пуста ставимо зайця(1)
                     // інакше шукаємо другу ячейку
                     // до поки кінець
                     for (let i = 0; i < this.numberRabbit; i++) {
                        let ranCell
                        do {
                           ranCell = 0 + Math.floor(Math.random() * this.battleField.length)
                        } while (this.battleField[ranCell] === 1)
                        this.battleField[ranCell] = 1
                     }
                  }
                  // Постріл
                  ShotGame.prototype.shot = function (user) {
                     return this.battleField[user - 1] === 1
                  }
                  // Гра користувача
                  ShotGame.prototype.play = function () {
                     const game = this.fillRabbit()
                     let user
                     do {
                        user = parseInt(
                           prompt(`Зробіть постріл від 1 до ${this.battleField.length}`)
                        )
                        if (this.shot(user)) {
                           alert("Ви влучили!!!")
                           this.battleField[user - 1] = 0
                           this.numberRabbit--
                        } else {
                           alert("Не влучили!!!")
                        }
                     } while (this.numberRabbit > 0 && isFinite(user))
                     alert("Ви виграли ігру. Вітаємо!!!")
                  }
                  const game = new ShotGame(5, 2)
                  game.play()
                  console.log(0 + Math.floor(Math.random() * 5))
               </script>
            </div>
         </div>
      </div>
   </body>
</html>
